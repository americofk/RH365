{"version":3,"file":"position-requirements.js","sourceRoot":"","sources":["../../../TS/Positions/position-requirements.ts"],"names":[],"mappings":"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","sourcesContent":["// ============================================================================\r\n// Archivo: position-requirements.ts\r\n// Proyecto: RH365.WebMVC\r\n// Ruta: TS/Positions/position-requirements.ts\r\n// Descripción:\r\n//   - Gestión de Requisitos de Posición (línea por línea)\r\n//   - CRUD completo de requisitos\r\n//   - Integración con API REST (/api/PositionRequirements)\r\n//   - Filtrado en cliente por PositionRefRecID\r\n//   - Tab independiente dentro del formulario de posición\r\n// Estándar: ISO 27001 - Control A.12.1.1 (Procedimientos operacionales documentados)\r\n// ============================================================================\r\n\r\n(function () {\r\n    // ========================================================================\r\n    // CONFIGURACIÓN GLOBAL Y CONTEXTO\r\n    // ========================================================================\r\n    const w: any = window;\r\n    const d: Document = document;\r\n    const $: any = w.jQuery || w.$;\r\n\r\n    const pageContainer = d.querySelector(\"#position-form-page\");\r\n    if (!pageContainer) return;\r\n\r\n    const apiBase: string = w.RH365.urls.apiBase;\r\n    const token: string = pageContainer.getAttribute(\"data-token\") || \"\";\r\n    const positionRecID: number = parseInt(pageContainer.getAttribute(\"data-recid\") || \"0\", 10);\r\n    const isNewPosition: boolean = pageContainer.getAttribute(\"data-isnew\") === \"true\";\r\n\r\n    // ========================================================================\r\n    // INTERFACES\r\n    // ========================================================================\r\n\r\n    interface PositionRequirement {\r\n        RecID?: number;\r\n        ID?: string;\r\n        Name: string;\r\n        Detail: string;\r\n        PositionRefRecID: number;\r\n        Observations?: string;\r\n        CreatedBy?: string;\r\n        CreatedOn?: string;\r\n        ModifiedBy?: string;\r\n        ModifiedOn?: string;\r\n    }\r\n\r\n    // ========================================================================\r\n    // ESTADO\r\n    // ========================================================================\r\n\r\n    let requirements: PositionRequirement[] = [];\r\n    let editingRequirementRecID: number | null = null;\r\n\r\n    // ========================================================================\r\n    // COMUNICACIÓN CON API\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Realiza peticiones HTTP al API con manejo de autenticación\r\n     */\r\n    const fetchJson = async (url: string, options?: RequestInit): Promise<any> => {\r\n        const headers: Record<string, string> = {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n\r\n        if (token) {\r\n            headers['Authorization'] = `Bearer ${token}`;\r\n        }\r\n\r\n        const response = await fetch(url, { ...options, headers });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({}));\r\n            throw new Error(JSON.stringify(errorData));\r\n        }\r\n\r\n        // Si es DELETE y retorna 204 No Content, no intenta parsear JSON\r\n        if (response.status === 204) {\r\n            return null;\r\n        }\r\n\r\n        return response.json();\r\n    };\r\n\r\n    // ========================================================================\r\n    // CARGA DE REQUISITOS (CON FILTRADO EN FRONTEND)\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Cargar TODOS los requisitos desde el API y filtrar por PositionRefRecID\r\n     */\r\n    const loadRequirements = async (): Promise<void> => {\r\n        if (isNewPosition) {\r\n            requirements = [];\r\n            renderRequirementsTab();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Traer TODOS los requisitos (ajusta el take según necesites)\r\n            const url = `${apiBase}/PositionRequirements?skip=0&take=1000`;\r\n            const response = await fetchJson(url);\r\n\r\n            // Filtrar solo los requisitos de esta posición\r\n            if (Array.isArray(response)) {\r\n                // Si el endpoint retorna array directo\r\n                requirements = response.filter(\r\n                    (req: PositionRequirement) => req.PositionRefRecID === positionRecID\r\n                );\r\n            } else if (response?.Data && Array.isArray(response.Data)) {\r\n                // Si el endpoint retorna objeto con propiedad Data (paginado)\r\n                requirements = response.Data.filter(\r\n                    (req: PositionRequirement) => req.PositionRefRecID === positionRecID\r\n                );\r\n            } else {\r\n                console.warn('Formato de respuesta inesperado:', response);\r\n                requirements = [];\r\n            }\r\n\r\n            renderRequirementsTab();\r\n        } catch (error) {\r\n            console.error('Error al cargar requisitos:', error);\r\n            requirements = [];\r\n            renderRequirementsTab();\r\n        }\r\n    };\r\n\r\n    // ========================================================================\r\n    // RENDERIZADO\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Escapa caracteres HTML para prevenir XSS\r\n     */\r\n    const escapeHtml = (text: string): string => {\r\n        if (!text) return '';\r\n        const map: Record<string, string> = {\r\n            '&': '&amp;',\r\n            '<': '&lt;',\r\n            '>': '&gt;',\r\n            '\"': '&quot;',\r\n            \"'\": '&#039;'\r\n        };\r\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\r\n    };\r\n\r\n    /**\r\n     * Renderizar el tab de requisitos con la tabla o mensajes informativos\r\n     */\r\n    const renderRequirementsTab = (): void => {\r\n        const container = $('#requirements-container');\r\n        container.empty();\r\n\r\n        // Modo creación: no permite agregar requisitos hasta guardar la posición\r\n        if (isNewPosition) {\r\n            container.html(`\r\n                <div class=\"alert alert-warning\" role=\"alert\">\r\n                    <i class=\"fa fa-info-circle\"></i>\r\n                    <strong>Modo Creación:</strong> \r\n                    Primero debe guardar la posición para poder agregar requisitos.\r\n                </div>\r\n            `);\r\n            $('#btn-add-requirement').prop('disabled', true);\r\n            return;\r\n        }\r\n\r\n        // Habilitar botón de agregar requisito en modo edición\r\n        $('#btn-add-requirement').prop('disabled', false);\r\n\r\n        // Si no hay requisitos, mostrar mensaje informativo\r\n        if (requirements.length === 0) {\r\n            container.html(`\r\n                <div class=\"alert alert-info\" role=\"alert\">\r\n                    <i class=\"fa fa-lightbulb-o\"></i>\r\n                    No hay requisitos registrados. Haga clic en <strong>\"Agregar Requisito\"</strong> para comenzar.\r\n                </div>\r\n            `);\r\n            return;\r\n        }\r\n\r\n        // Renderizar tabla con requisitos existentes\r\n        const tableHtml = `\r\n            <div class=\"table-responsive\">\r\n                <table class=\"table table-striped table-bordered table-hover\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style=\"width: 20%;\">Nombre</th>\r\n                            <th style=\"width: 30%;\">Detalle</th>\r\n                            <th style=\"width: 35%;\">Observaciones</th>\r\n                            <th style=\"width: 15%;\" class=\"text-center\">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        ${requirements.map(req => `\r\n                            <tr data-recid=\"${req.RecID}\">\r\n                                <td>${escapeHtml(req.Name || '')}</td>\r\n                                <td>${escapeHtml(req.Detail || '')}</td>\r\n                                <td>${escapeHtml(req.Observations || '')}</td>\r\n                                <td class=\"text-center\">\r\n                                    <button type=\"button\" \r\n                                            class=\"btn btn-xs btn-primary btn-edit-requirement\" \r\n                                            data-recid=\"${req.RecID}\" \r\n                                            title=\"Editar\">\r\n                                        <i class=\"fa fa-pencil\"></i>\r\n                                    </button>\r\n                                    <button type=\"button\" \r\n                                            class=\"btn btn-xs btn-danger btn-delete-requirement\" \r\n                                            data-recid=\"${req.RecID}\" \r\n                                            title=\"Eliminar\">\r\n                                        <i class=\"fa fa-trash\"></i>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        `).join('')}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        `;\r\n\r\n        container.html(tableHtml);\r\n    };\r\n\r\n    // ========================================================================\r\n    // MODAL - AGREGAR/EDITAR REQUISITO\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Abrir modal en modo AGREGAR (nuevo requisito)\r\n     */\r\n    const openAddRequirementModal = (): void => {\r\n        editingRequirementRecID = null;\r\n        $('#requirement-name').val('');\r\n        $('#requirement-detail').val('');\r\n        $('#requirement-observations').val('');\r\n        $('#modal-requirement-title').text('Agregar Requisito');\r\n        ($('#modal-requirement') as any).modal('show');\r\n    };\r\n\r\n    /**\r\n     * Abrir modal en modo EDITAR (requisito existente)\r\n     */\r\n    const openEditRequirementModal = (recID: number): void => {\r\n        const requirement = requirements.find(r => r.RecID === recID);\r\n        if (!requirement) {\r\n            (w as any).ALERTS.error('Requisito no encontrado', 'Error');\r\n            return;\r\n        }\r\n\r\n        editingRequirementRecID = recID;\r\n        $('#requirement-name').val(requirement.Name);\r\n        $('#requirement-detail').val(requirement.Detail);\r\n        $('#requirement-observations').val(requirement.Observations || '');\r\n        $('#modal-requirement-title').text('Editar Requisito');\r\n        ($('#modal-requirement') as any).modal('show');\r\n    };\r\n\r\n    // ========================================================================\r\n    // CRUD - CREAR REQUISITO\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Crear nuevo requisito en el API\r\n     */\r\n    const createRequirement = async (): Promise<void> => {\r\n        const name = ($('#requirement-name').val() as string).trim();\r\n        const detail = ($('#requirement-detail').val() as string).trim();\r\n        const observations = ($('#requirement-observations').val() as string).trim();\r\n\r\n        // Validaciones\r\n        if (!name) {\r\n            (w as any).ALERTS.warn('El campo \"Nombre\" es obligatorio', 'Validación');\r\n            return;\r\n        }\r\n\r\n        if (!detail) {\r\n            (w as any).ALERTS.warn('El campo \"Detalle\" es obligatorio', 'Validación');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const payload: PositionRequirement = {\r\n                Name: name,\r\n                Detail: detail,\r\n                PositionRefRecID: positionRecID,\r\n                Observations: observations || null\r\n            };\r\n\r\n            const url = `${apiBase}/PositionRequirements`;\r\n            const newRequirement = await fetchJson(url, {\r\n                method: 'POST',\r\n                body: JSON.stringify(payload)\r\n            });\r\n\r\n            // Agregar al array local\r\n            requirements.push(newRequirement);\r\n            renderRequirementsTab();\r\n\r\n            ($('#modal-requirement') as any).modal('hide');\r\n            (w as any).ALERTS.ok('Requisito agregado exitosamente', 'Éxito');\r\n        } catch (error: any) {\r\n            console.error('Error al crear requisito:', error);\r\n            let errorMessage = 'Error al crear el requisito';\r\n\r\n            try {\r\n                const errorData = JSON.parse(error.message);\r\n                if (errorData.errors) {\r\n                    const errorsArray: string[] = [];\r\n                    for (const key in errorData.errors) {\r\n                        if (errorData.errors.hasOwnProperty(key)) {\r\n                            const errList = errorData.errors[key];\r\n                            if (Array.isArray(errList)) {\r\n                                errorsArray.push(...errList);\r\n                            } else {\r\n                                errorsArray.push(errList);\r\n                            }\r\n                        }\r\n                    }\r\n                    errorMessage = errorsArray.join(', ');\r\n                } else if (errorData.title) {\r\n                    errorMessage = errorData.title;\r\n                }\r\n            } catch {\r\n                errorMessage = error.message || errorMessage;\r\n            }\r\n\r\n            (w as any).ALERTS.error(errorMessage, 'Error');\r\n        }\r\n    };\r\n\r\n    // ========================================================================\r\n    // CRUD - ACTUALIZAR REQUISITO\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Actualizar requisito existente en el API\r\n     */\r\n    const updateRequirement = async (): Promise<void> => {\r\n        if (!editingRequirementRecID) {\r\n            (w as any).ALERTS.error('No hay requisito seleccionado para editar', 'Error');\r\n            return;\r\n        }\r\n\r\n        const name = ($('#requirement-name').val() as string).trim();\r\n        const detail = ($('#requirement-detail').val() as string).trim();\r\n        const observations = ($('#requirement-observations').val() as string).trim();\r\n\r\n        // Validaciones\r\n        if (!name) {\r\n            (w as any).ALERTS.warn('El campo \"Nombre\" es obligatorio', 'Validación');\r\n            return;\r\n        }\r\n\r\n        if (!detail) {\r\n            (w as any).ALERTS.warn('El campo \"Detalle\" es obligatorio', 'Validación');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const payload: Partial<PositionRequirement> = {\r\n                Name: name,\r\n                Detail: detail,\r\n                PositionRefRecID: positionRecID,\r\n                Observations: observations || null\r\n            };\r\n\r\n            const url = `${apiBase}/PositionRequirements/${editingRequirementRecID}`;\r\n            const updatedRequirement = await fetchJson(url, {\r\n                method: 'PUT',\r\n                body: JSON.stringify(payload)\r\n            });\r\n\r\n            // Actualizar en el array local\r\n            const index = requirements.findIndex(r => r.RecID === editingRequirementRecID);\r\n            if (index !== -1) {\r\n                requirements[index] = updatedRequirement;\r\n            }\r\n\r\n            renderRequirementsTab();\r\n            ($('#modal-requirement') as any).modal('hide');\r\n            (w as any).ALERTS.ok('Requisito actualizado exitosamente', 'Éxito');\r\n        } catch (error: any) {\r\n            console.error('Error al actualizar requisito:', error);\r\n            let errorMessage = 'Error al actualizar el requisito';\r\n\r\n            try {\r\n                const errorData = JSON.parse(error.message);\r\n                if (errorData.errors) {\r\n                    const errorsArray: string[] = [];\r\n                    for (const key in errorData.errors) {\r\n                        if (errorData.errors.hasOwnProperty(key)) {\r\n                            const errList = errorData.errors[key];\r\n                            if (Array.isArray(errList)) {\r\n                                errorsArray.push(...errList);\r\n                            } else {\r\n                                errorsArray.push(errList);\r\n                            }\r\n                        }\r\n                    }\r\n                    errorMessage = errorsArray.join(', ');\r\n                } else if (errorData.title) {\r\n                    errorMessage = errorData.title;\r\n                }\r\n            } catch {\r\n                errorMessage = error.message || errorMessage;\r\n            }\r\n\r\n            (w as any).ALERTS.error(errorMessage, 'Error');\r\n        }\r\n    };\r\n\r\n    // ========================================================================\r\n    // CRUD - ELIMINAR REQUISITO\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Eliminar requisito del API con confirmación\r\n     */\r\n    const deleteRequirement = (recID: number): void => {\r\n        (w as any).ALERTS.confirm(\r\n            '¿Está seguro de eliminar este requisito?',\r\n            'Confirmar Eliminación',\r\n            async (confirmed: boolean) => {\r\n                if (!confirmed) return;\r\n\r\n                try {\r\n                    const url = `${apiBase}/PositionRequirements/${recID}`;\r\n                    await fetchJson(url, { method: 'DELETE' });\r\n\r\n                    // Eliminar del array local\r\n                    requirements = requirements.filter(r => r.RecID !== recID);\r\n                    renderRequirementsTab();\r\n\r\n                    (w as any).ALERTS.ok('Requisito eliminado exitosamente', 'Éxito');\r\n                } catch (error: any) {\r\n                    console.error('Error al eliminar requisito:', error);\r\n\r\n                    let errorMessage = 'Error al eliminar el requisito';\r\n                    try {\r\n                        const errorData = JSON.parse(error.message);\r\n                        if (errorData.message) {\r\n                            errorMessage = errorData.message;\r\n                        } else if (errorData.title) {\r\n                            errorMessage = errorData.title;\r\n                        }\r\n                    } catch {\r\n                        errorMessage = error.message || errorMessage;\r\n                    }\r\n\r\n                    (w as any).ALERTS.error(errorMessage, 'Error');\r\n                }\r\n            },\r\n            { type: 'danger' }\r\n        );\r\n    };\r\n\r\n    // ========================================================================\r\n    // EVENT HANDLERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Botón \"Agregar Requisito\"\r\n     */\r\n    $('#btn-add-requirement').on('click', () => {\r\n        openAddRequirementModal();\r\n    });\r\n\r\n    /**\r\n     * Botones \"Editar\" en la tabla (delegación de eventos)\r\n     */\r\n    $(document).on('click', '.btn-edit-requirement', function () {\r\n        const recID = parseInt($(this).data('recid'), 10);\r\n        openEditRequirementModal(recID);\r\n    });\r\n\r\n    /**\r\n     * Botones \"Eliminar\" en la tabla (delegación de eventos)\r\n     */\r\n    $(document).on('click', '.btn-delete-requirement', function () {\r\n        const recID = parseInt($(this).data('recid'), 10);\r\n        deleteRequirement(recID);\r\n    });\r\n\r\n    /**\r\n     * Botón \"Guardar\" en el modal\r\n     */\r\n    $('#btn-save-requirement').on('click', async () => {\r\n        if (editingRequirementRecID) {\r\n            await updateRequirement();\r\n        } else {\r\n            await createRequirement();\r\n        }\r\n    });\r\n\r\n    // ========================================================================\r\n    // INICIALIZACIÓN\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Cargar requisitos al iniciar el módulo\r\n     */\r\n    $(async function () {\r\n        try {\r\n            await loadRequirements();\r\n        } catch (error) {\r\n            console.error('Error al inicializar módulo de requisitos:', error);\r\n            (w as any).ALERTS.error('Error al inicializar requisitos', 'Error');\r\n        }\r\n    });\r\n})();"]}