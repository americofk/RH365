{"version":3,"file":"project-form.js","sourceRoot":"","sources":["../../../TS/Projects/project-form.ts"],"names":[],"mappings":"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","sourcesContent":["// ============================================================================\r\n// Archivo: project-form.ts\r\n// Proyecto: RH365.WebMVC\r\n// Ruta: TS/Projects/project-form.ts\r\n// Descripci�n: Formulario din�mico para Crear/Editar Proyectos\r\n// ============================================================================\r\n\r\n(function () {\r\n    const w: any = window;\r\n    const d: Document = document;\r\n    const $: any = w.jQuery || w.$;\r\n\r\n    const apiBase: string = (w.RH365?.urls?.apiBase) || \"http://localhost:9595/api\";\r\n    const pageContainer = d.querySelector(\"#project-form-page\");\r\n\r\n    if (!pageContainer) return;\r\n\r\n    const token: string = pageContainer.getAttribute(\"data-token\") || \"\";\r\n    const dataareaId: string = pageContainer.getAttribute(\"data-dataarea\") || \"DAT\";\r\n    const userRefRecID: number = parseInt(pageContainer.getAttribute(\"data-user\") || \"0\", 10);\r\n    const recId: number = parseInt(pageContainer.getAttribute(\"data-recid\") || \"0\", 10);\r\n    const isNew: boolean = pageContainer.getAttribute(\"data-isnew\") === \"true\";\r\n\r\n    // Configuraci�n de campos (similar a columnas de DataTable)\r\n    interface FieldConfig {\r\n        field: string;\r\n        label: string;\r\n        type: 'text' | 'number' | 'date' | 'datetime' | 'textarea' | 'select' | 'checkbox';\r\n        required?: boolean;\r\n        maxLength?: number;\r\n        options?: { value: string; text: string }[];\r\n        placeholder?: string;\r\n        helpText?: string;\r\n        readonly?: boolean;\r\n    }\r\n\r\n    const fieldDefinitions: FieldConfig[] = [\r\n        { field: 'ID', label: 'ID Sistema', type: 'text', readonly: true },\r\n        { field: 'ProjectCode', label: 'C�digo Proyecto', type: 'text', required: true, maxLength: 50, placeholder: 'PRJ-001' },\r\n        { field: 'Name', label: 'Nombre', type: 'text', required: true, maxLength: 200 },\r\n        { field: 'LedgerAccount', label: 'Cuenta Contable', type: 'text', maxLength: 50 },\r\n        {\r\n            field: 'ProjectStatus',\r\n            label: 'Estado',\r\n            type: 'select',\r\n            required: true,\r\n            options: [\r\n                { value: 'true', text: 'Activo' },\r\n                { value: 'false', text: 'Inactivo' }\r\n            ]\r\n        },\r\n        { field: 'CreatedOn', label: 'Fecha Creaci�n', type: 'datetime', readonly: true },\r\n        { field: 'CreatedBy', label: 'Creado Por', type: 'text', readonly: true },\r\n        { field: 'ModifiedOn', label: '�ltima Modificaci�n', type: 'datetime', readonly: true },\r\n        { field: 'ModifiedBy', label: 'Modificado Por', type: 'text', readonly: true },\r\n        { field: 'Observations', label: 'Observaciones', type: 'textarea', maxLength: 500 }\r\n    ];\r\n\r\n    let projectData: any = null;\r\n\r\n    const fetchJson = async (url: string, options?: RequestInit): Promise<any> => {\r\n        const headers: Record<string, string> = {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        };\r\n        if (token) {\r\n            headers['Authorization'] = `Bearer ${token}`;\r\n        }\r\n        const response = await fetch(url, { ...options, headers });\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({}));\r\n            throw new Error(JSON.stringify(errorData));\r\n        }\r\n        return response.json();\r\n    };\r\n\r\n    const renderField = (config: FieldConfig, value: any): string => {\r\n        const fieldId = config.field;\r\n        const fieldName = config.field;\r\n        const labelClass = 'control-label col-md-3 col-sm-3 col-xs-12';\r\n        const inputContainerClass = 'col-md-6 col-sm-6 col-xs-12';\r\n        const requiredMark = config.required ? '<span class=\"required\">*</span>' : '';\r\n        const readonlyAttr = config.readonly ? 'readonly' : '';\r\n        const requiredAttr = config.required ? 'required' : '';\r\n\r\n        let inputHtml = '';\r\n        let displayValue = value ?? '';\r\n\r\n        switch (config.type) {\r\n            case 'textarea':\r\n                inputHtml = `<textarea id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" rows=\"3\" maxlength=\"${config.maxLength || 500}\" ${readonlyAttr} ${requiredAttr}>${displayValue}</textarea>`;\r\n                break;\r\n\r\n            case 'select':\r\n                const options = config.options || [];\r\n                const optionsHtml = options.map(opt =>\r\n                    `<option value=\"${opt.value}\" ${displayValue.toString() === opt.value ? 'selected' : ''}>${opt.text}</option>`\r\n                ).join('');\r\n                inputHtml = `<select id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" ${readonlyAttr ? 'disabled' : ''} ${requiredAttr}>${optionsHtml}</select>`;\r\n                break;\r\n\r\n            case 'checkbox':\r\n                const checked = displayValue === true || displayValue === 'true' ? 'checked' : '';\r\n                inputHtml = `<input type=\"checkbox\" id=\"${fieldId}\" name=\"${fieldName}\" class=\"flat\" ${checked} ${readonlyAttr ? 'disabled' : ''}>`;\r\n                break;\r\n\r\n            case 'datetime':\r\n                if (displayValue && typeof displayValue === 'string' && /^\\d{4}-\\d{2}-\\d{2}T/.test(displayValue)) {\r\n                    displayValue = new Date(displayValue).toLocaleString('es-DO');\r\n                }\r\n                inputHtml = `<input type=\"text\" id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" value=\"${displayValue}\" ${readonlyAttr} ${requiredAttr}>`;\r\n                break;\r\n\r\n            case 'date':\r\n                if (displayValue && typeof displayValue === 'string' && /^\\d{4}-\\d{2}-\\d{2}T/.test(displayValue)) {\r\n                    displayValue = displayValue.split('T')[0];\r\n                }\r\n                inputHtml = `<input type=\"date\" id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" value=\"${displayValue}\" ${readonlyAttr} ${requiredAttr}>`;\r\n                break;\r\n\r\n            case 'number':\r\n                inputHtml = `<input type=\"number\" id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" value=\"${displayValue}\" ${readonlyAttr} ${requiredAttr}>`;\r\n                break;\r\n\r\n            default: // text\r\n                inputHtml = `<input type=\"text\" id=\"${fieldId}\" name=\"${fieldName}\" class=\"form-control\" maxlength=\"${config.maxLength || 255}\" value=\"${displayValue}\" placeholder=\"${config.placeholder || ''}\" ${readonlyAttr} ${requiredAttr}>`;\r\n                break;\r\n        }\r\n\r\n        const helpTextHtml = config.helpText ? `<span class=\"help-block\">${config.helpText}</span>` : '';\r\n\r\n        return `\r\n            <div class=\"form-group\">\r\n                <label class=\"${labelClass}\" for=\"${fieldId}\">\r\n                    ${config.label} ${requiredMark}\r\n                </label>\r\n                <div class=\"${inputContainerClass}\">\r\n                    ${inputHtml}\r\n                    ${helpTextHtml}\r\n                </div>\r\n            </div>\r\n        `;\r\n    };\r\n\r\n    const loadProjectData = async (): Promise<void> => {\r\n        if (isNew) {\r\n            renderForm({});\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const url = `${apiBase}/Projects/${recId}`;\r\n            projectData = await fetchJson(url);\r\n            renderForm(projectData);\r\n        } catch (error) {\r\n            (w as any).ALERTS.error('Error al cargar los datos del proyecto', 'Error');\r\n            renderForm({});\r\n        }\r\n    };\r\n\r\n    const renderForm = (data: any): void => {\r\n        const container = $('#dynamic-fields-container');\r\n        container.empty();\r\n\r\n        fieldDefinitions.forEach(config => {\r\n            const value = data[config.field];\r\n            const fieldHtml = renderField(config, value);\r\n            container.append(fieldHtml);\r\n        });\r\n\r\n        // Inicializar iCheck para checkboxes\r\n        if ($.fn.iCheck) {\r\n            $('.flat').iCheck({\r\n                checkboxClass: 'icheckbox_flat-green'\r\n            });\r\n        }\r\n    };\r\n\r\n    const getFormData = (): any => {\r\n        const formData: any = {};\r\n\r\n        fieldDefinitions.forEach(config => {\r\n            const field = config.field;\r\n            const $input = $(`#${field}`);\r\n\r\n            // Saltar campos readonly (auditor�a)\r\n            if (config.readonly) {\r\n                return;\r\n            }\r\n\r\n            if ($input.length) {\r\n                if (config.type === 'checkbox') {\r\n                    formData[field] = $input.is(':checked');\r\n                } else if (config.type === 'select' && field === 'ProjectStatus') {\r\n                    // Convertir string \"true\"/\"false\" a boolean\r\n                    const val = $input.val();\r\n                    formData[field] = val === 'true';\r\n                } else if (config.type === 'number') {\r\n                    const val = $input.val();\r\n                    formData[field] = val ? parseFloat(val) : null;\r\n                } else {\r\n                    const val = $input.val();\r\n                    formData[field] = val || null;\r\n                }\r\n            }\r\n        });\r\n\r\n        return formData;\r\n    };\r\n\r\n    const saveProject = async (): Promise<void> => {\r\n        const formData = getFormData();\r\n\r\n        try {\r\n            const url = isNew ? `${apiBase}/Projects` : `${apiBase}/Projects/${recId}`;\r\n            const method = isNew ? 'POST' : 'PUT';\r\n\r\n            // Payload DIRECTO sin wrapper request\r\n            const payload = {\r\n                ProjectCode: formData.ProjectCode,\r\n                Name: formData.Name,\r\n                LedgerAccount: formData.LedgerAccount || null,\r\n                ProjectStatus: formData.ProjectStatus,\r\n                Observations: formData.Observations || null\r\n            };\r\n\r\n            console.log('FormData capturado:', formData); // Debug\r\n            console.log('Enviando payload:', payload); // Debug\r\n\r\n            await fetchJson(url, {\r\n                method: method,\r\n                body: JSON.stringify(payload)\r\n            });\r\n\r\n            (w as any).ALERTS.ok(\r\n                isNew ? 'Proyecto creado exitosamente' : 'Proyecto actualizado exitosamente',\r\n                '�xito'\r\n            );\r\n\r\n            setTimeout(() => {\r\n                window.location.href = '/Project/LP_Projects';\r\n            }, 1500);\r\n\r\n        } catch (error: any) {\r\n            console.error('Error al guardar:', error);\r\n            let errorMessage = 'Error al guardar el proyecto';\r\n\r\n            try {\r\n                const errorData = JSON.parse(error.message);\r\n                if (errorData.errors) {\r\n                    const errorsArray: string[] = [];\r\n                    for (const key in errorData.errors) {\r\n                        if (errorData.errors.hasOwnProperty(key)) {\r\n                            const errList = errorData.errors[key];\r\n                            if (Array.isArray(errList)) {\r\n                                for (let i = 0; i < errList.length; i++) {\r\n                                    errorsArray.push(errList[i]);\r\n                                }\r\n                            } else {\r\n                                errorsArray.push(errList);\r\n                            }\r\n                        }\r\n                    }\r\n                    errorMessage = errorsArray.join(', ');\r\n                }\r\n            } catch {\r\n                errorMessage = error.message || errorMessage;\r\n            }\r\n\r\n            (w as any).ALERTS.error(errorMessage, 'Error');\r\n        }\r\n    };\r\n\r\n    $('#btn-save').on('click', async () => {\r\n        const form = document.getElementById('frm-project') as HTMLFormElement;\r\n        if (!form.checkValidity()) {\r\n            form.reportValidity();\r\n            return;\r\n        }\r\n        await saveProject();\r\n    });\r\n\r\n    // Inicializar\r\n    $(async function () {\r\n        try {\r\n            await loadProjectData();\r\n        } catch (error) {\r\n            (w as any).ALERTS.error('Error al inicializar el formulario', 'Error');\r\n        }\r\n    });\r\n})();"]}