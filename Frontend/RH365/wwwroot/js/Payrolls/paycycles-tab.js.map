{"version":3,"file":"paycycles-tab.js","sourceRoot":"","sources":["../../../TS/Payrolls/paycycles-tab.ts"],"names":[],"mappings":"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","sourcesContent":["// ============================================================================\n// Archivo: paycycles-tab.ts\n// Proyecto: RH365.WebMVC\n// Ruta: wwwroot/js/Payrolls/paycycles-tab.ts\n// Descripci√≥n:\n//   - Tab de Ciclos de Pago dentro del formulario de Payroll\n//   - Generaci√≥n masiva de ciclos con un solo clic\n//   - CRUD individual de ciclos\n//   - Eliminaci√≥n m√∫ltiple de ciclos seleccionados\n//   - Validaciones de estado (solo Open se puede editar/eliminar)\n//   - Soporte para ISR y TSS con iconos verdes\n//   - MEJORAS: Iconos verdes para ISR/TSS + Ordenamiento por columnas\n// ISO 27001: Gesti√≥n de ciclos con trazabilidad completa\n// ============================================================================\n\n(function () {\n    const w: any = window;\n    const d: Document = document;\n    const $: any = w.jQuery || w.$;\n\n    const apiBase: string = w.RH365?.urls?.apiBase || '/api';\n\n    // Variables globales\n    let currentPayrollId: number = 0;\n    let payCycles: any[] = [];\n    let sortField: string = '';\n    let sortOrder: 'asc' | 'desc' = 'asc';\n\n    // ========================================================================\n    // INICIALIZACI√ìN DE PAYROLL ID\n    // ========================================================================\n\n    /**\n     * Obtiene el PayrollId desde el DOM\n     */\n    const getPayrollIdFromDOM = (): number => {\n        const pageContainer = d.querySelector(\"#payroll-form-page\");\n        if (!pageContainer) {\n            console.warn('‚ö†Ô∏è No se encontr√≥ #payroll-form-page');\n            return 0;\n        }\n\n        const recIdAttr = pageContainer.getAttribute(\"data-recid\");\n        const recId = parseInt(recIdAttr || \"0\", 10);\n        \n        console.log('üìä PayrollId desde DOM:', recId);\n        return recId;\n    };\n\n    // ========================================================================\n    // FUNCI√ìN PARA CARGAR CICLOS DE PAGO\n    // ========================================================================\n\n    const loadPayCycles = async (): Promise<void> => {\n        console.log('üìä loadPayCycles() - Iniciando carga...');\n        console.log('üìä Current Payroll ID:', currentPayrollId);\n\n        // Si no hay PayrollId, mostrar estado vac√≠o\n        if (!currentPayrollId || currentPayrollId === 0) {\n            console.log('‚ö†Ô∏è No hay Payroll ID, mostrando estado para nuevo registro');\n            showNewPayrollState();\n            return;\n        }\n\n        try {\n            // Llamar al API para obtener TODOS los ciclos\n            const url = `${apiBase}/PayCycles?skip=0&take=500`;\n            console.log('üåê Fetching:', url);\n\n            const response = await fetch(url, {\n                method: 'GET',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}`);\n            }\n\n            const allCycles = await response.json();\n            console.log('üì¶ Total ciclos recibidos:', allCycles.length);\n\n            // Filtrar solo los ciclos de este Payroll (PascalCase)\n            payCycles = allCycles.filter((c: any) => {\n                const match = c.PayrollRefRecID === currentPayrollId;\n                if (match) {\n                    console.log('‚úì Ciclo matched:', c.ID, 'PayrollRef:', c.PayrollRefRecID);\n                }\n                return match;\n            });\n\n            console.log(`‚úÖ ${payCycles.length} ciclos filtrados para Payroll ${currentPayrollId}`);\n\n            // Aplicar ordenamiento si existe\n            if (sortField) {\n                sortPayCycles();\n            }\n\n            renderPayCyclesTable();\n            updateCycleCount(payCycles.length);\n            updateButtonStates();\n        } catch (error) {\n            console.error('‚ùå Error al cargar ciclos:', error);\n            (w as any).ALERTS?.error('Error al cargar los ciclos de pago', 'Error');\n            showEmptyState();\n        }\n    };\n\n    // ========================================================================\n    // ‚úÖ NUEVA FUNCI√ìN: ORDENAMIENTO DE CICLOS\n    // ========================================================================\n\n    const sortPayCycles = (): void => {\n        if (!sortField) return;\n\n        payCycles.sort((a, b) => {\n            let aVal = a[sortField];\n            let bVal = b[sortField];\n\n            // Convertir fechas a timestamps para comparar\n            if (sortField.includes('Date')) {\n                aVal = new Date(aVal).getTime();\n                bVal = new Date(bVal).getTime();\n            }\n\n            // Convertir n√∫meros\n            if (typeof aVal === 'number' && typeof bVal === 'number') {\n                return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;\n            }\n\n            // Comparar strings\n            const aStr = String(aVal || '').toLowerCase();\n            const bStr = String(bVal || '').toLowerCase();\n\n            if (sortOrder === 'asc') {\n                return aStr < bStr ? -1 : aStr > bStr ? 1 : 0;\n            } else {\n                return bStr < aStr ? -1 : bStr > aStr ? 1 : 0;\n            }\n        });\n    };\n\n    // ========================================================================\n    // RENDERIZADO DE TABLA\n    // ========================================================================\n\n    const renderPayCyclesTable = (): void => {\n        const tbody = $('#paycycles-tbody');\n        tbody.empty();\n\n        if (payCycles.length === 0) {\n            showEmptyState();\n            return;\n        }\n\n        payCycles.forEach(cycle => {\n            const statusBadge = getStatusBadge(cycle.StatusPeriod);\n            const isLocked = cycle.StatusPeriod === 2 || cycle.StatusPeriod === 3; // Paid or Registered\n\n            // ‚úÖ MEJORADO: Iconos verdes para ISR y TSS\n            const isrIcon = cycle.IsForTax \n                ? '<i class=\"fa fa-check-circle check-icon-green\"></i>' \n                : '<i class=\"fa fa-circle-thin check-icon-gray\"></i>';\n            \n            const tssIcon = cycle.IsForTss \n                ? '<i class=\"fa fa-check-circle check-icon-green\"></i>' \n                : '<i class=\"fa fa-circle-thin check-icon-gray\"></i>';\n\n            const row = `\n                <tr data-recid=\"${cycle.RecID}\">\n                    <td class=\"text-center\">\n                        <input type=\"checkbox\" \n                               class=\"flat cycle-check\" \n                               data-recid=\"${cycle.RecID}\"\n                               data-status=\"${cycle.StatusPeriod}\"\n                               ${isLocked ? 'disabled' : ''}>\n                    </td>\n                    <td>${cycle.ID || '-'}</td>\n                    <td>${formatDate(cycle.PeriodStartDate)}</td>\n                    <td>${formatDate(cycle.PeriodEndDate)}</td>\n                    <td>${formatDate(cycle.PayDate)}</td>\n                    <td class=\"text-right\">${formatCurrency(cycle.AmountPaidPerPeriod)}</td>\n                    <td class=\"text-center\">${statusBadge}</td>\n                    <td class=\"text-center\">${isrIcon}</td>\n                    <td class=\"text-center\">${tssIcon}</td>\n                    <td class=\"text-center\">\n                        <button type=\"button\" \n                                class=\"btn btn-xs btn-primary btn-edit-cycle\" \n                                data-recid=\"${cycle.RecID}\"\n                                data-status=\"${cycle.StatusPeriod}\"\n                                ${isLocked ? 'disabled' : ''}>\n                            <i class=\"fa fa-pencil\"></i>\n                        </button>\n                        <button type=\"button\" \n                                class=\"btn btn-xs btn-danger btn-delete-cycle\" \n                                data-recid=\"${cycle.RecID}\"\n                                data-status=\"${cycle.StatusPeriod}\"\n                                ${isLocked ? 'disabled' : ''}>\n                            <i class=\"fa fa-trash\"></i>\n                        </button>\n                    </td>\n                </tr>\n            `;\n            tbody.append(row);\n        });\n\n        // Re-inicializar iCheck\n        if ($.fn.iCheck) {\n            $('.flat').iCheck({\n                checkboxClass: 'icheckbox_flat-green'\n            });\n        }\n\n        // ‚úÖ Actualizar indicadores visuales de ordenamiento\n        updateSortIndicators();\n    };\n\n    // ========================================================================\n    // ‚úÖ NUEVA FUNCI√ìN: ACTUALIZAR INDICADORES DE ORDENAMIENTO\n    // ========================================================================\n\n    const updateSortIndicators = (): void => {\n        // Remover clases de ordenamiento previas\n        $('.sortable-header').removeClass('asc desc');\n        \n        // Actualizar iconos\n        $('.sortable-header .sort-icon').removeClass('fa-sort-up fa-sort-down').addClass('fa-sort');\n        \n        // Aplicar clase al campo actualmente ordenado\n        if (sortField) {\n            const $header = $(`.sortable-header[data-field=\"${sortField}\"]`);\n            $header.addClass(sortOrder);\n            \n            const iconClass = sortOrder === 'asc' ? 'fa-sort-up' : 'fa-sort-down';\n            $header.find('.sort-icon').removeClass('fa-sort').addClass(iconClass);\n        }\n    };\n\n    const showEmptyState = (): void => {\n        const tbody = $('#paycycles-tbody');\n        tbody.html(`\n            <tr>\n                <td colspan=\"10\" class=\"text-center text-muted\" style=\"padding: 40px;\">\n                    <i class=\"fa fa-calendar-o fa-3x\" style=\"opacity: 0.3;\"></i>\n                    <p style=\"margin-top: 15px; font-size: 16px;\">No hay ciclos de pago</p>\n                    <p class=\"text-muted\" style=\"font-size: 13px;\">\n                        Use el bot√≥n <strong>\"Generar\"</strong> para crear ciclos autom√°ticamente\n                    </p>\n                </td>\n            </tr>\n        `);\n        updateCycleCount(0);\n    };\n\n    const showNewPayrollState = (): void => {\n        const tbody = $('#paycycles-tbody');\n        tbody.html(`\n            <tr>\n                <td colspan=\"10\" class=\"text-center\" style=\"padding: 40px;\">\n                    <i class=\"fa fa-info-circle fa-3x text-info\" style=\"opacity: 0.5;\"></i>\n                    <p style=\"margin-top: 15px; font-size: 16px; color: #31708f;\">\n                        <strong>Guarde primero la n√≥mina</strong>\n                    </p>\n                    <p class=\"text-muted\" style=\"font-size: 13px;\">\n                        Despu√©s de guardar podr√° generar los ciclos de pago\n                    </p>\n                </td>\n            </tr>\n        `);\n        updateCycleCount(0);\n    };\n\n    // ========================================================================\n    // ACTUALIZACI√ìN DE CONTADOR\n    // ========================================================================\n\n    const updateCycleCount = (count: number): void => {\n        $('#paycycles-count').text(`${count} ciclo${count !== 1 ? 's' : ''}`);\n        \n        const badge = $('#paycycles-count-badge');\n        if (count > 0) {\n            badge.text(count).show();\n        } else {\n            badge.hide();\n        }\n    };\n\n    // ========================================================================\n    // GENERACI√ìN MASIVA DE CICLOS\n    // ========================================================================\n\n    /**\n     * Genera m√∫ltiples ciclos de pago llamando al endpoint del API.\n     */\n    const generatePayCycles = async (): Promise<void> => {\n        console.log('üéØ generatePayCycles() llamado');\n\n        const quantity = parseInt($('#paycycle-quantity').val() as string, 10);\n        console.log('üìä Cantidad ingresada:', quantity);\n        console.log('üìä Payroll ID actual:', currentPayrollId);\n\n        // Validar cantidad\n        if (!quantity || quantity < 1 || quantity > 100) {\n            console.warn('‚ö†Ô∏è Cantidad inv√°lida:', quantity);\n            (w as any).ALERTS?.warn('Por favor ingrese una cantidad entre 1 y 100', 'Validaci√≥n');\n            return;\n        }\n\n        if (!currentPayrollId || currentPayrollId === 0) {\n            console.error('‚ùå Payroll ID inv√°lido:', currentPayrollId);\n            (w as any).ALERTS?.error('Debe guardar la n√≥mina antes de generar ciclos', 'Error');\n            return;\n        }\n\n        console.log(`üöÄ Generando ${quantity} ciclos para Payroll ${currentPayrollId}`);\n        console.log(`üåê API Base: ${apiBase}`);\n\n        try {\n            // Mostrar loading\n            (w as any).ALERTS?.info('Generando ciclos...', 'Procesando');\n\n            const url = `${apiBase}/PayCycles/generate`;\n            console.log('üåê POST:', url);\n\n            // Payload con PascalCase\n            const payload = {\n                PayrollRefRecID: currentPayrollId,\n                Quantity: quantity\n            };\n            console.log('üì§ Payload:', payload);\n\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(payload)\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                console.error('‚ùå Error del API:', errorData);\n                throw new Error(errorData.error || errorData.message || errorData.title || `HTTP ${response.status}`);\n            }\n\n            const result = await response.json();\n            console.log('‚úÖ Respuesta del API:', result);\n\n            // Mostrar mensaje de √©xito\n            const message = result.message || `Se generaron ${result.count || quantity} ciclo(s) exitosamente`;\n            (w as any).ALERTS?.ok(message, '√âxito');\n\n            // Recargar la tabla\n            await loadPayCycles();\n\n            // Limpiar input\n            $('#paycycle-quantity').val('12');\n\n        } catch (error: any) {\n            console.error('‚ùå Error al generar ciclos:', error);\n            (w as any).ALERTS?.error(\n                error.message || 'Error al generar los ciclos de pago',\n                'Error'\n            );\n        }\n    };\n\n    // ========================================================================\n    // CRUD INDIVIDUAL DE CICLOS\n    // ========================================================================\n\n    const createPayCycle = async (data: any): Promise<void> => {\n        try {\n            const url = `${apiBase}/PayCycles`;\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    ...data,\n                    PayrollRefRecID: currentPayrollId\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}`);\n            }\n\n            (w as any).ALERTS?.ok('Ciclo creado exitosamente', '√âxito');\n            await loadPayCycles();\n            ($ as any)('#modal-paycycle').modal('hide');\n        } catch (error) {\n            console.error('Error al crear ciclo:', error);\n            (w as any).ALERTS?.error('Error al crear el ciclo de pago', 'Error');\n        }\n    };\n\n    const updatePayCycle = async (recId: number, data: any): Promise<void> => {\n        try {\n            const url = `${apiBase}/PayCycles/${recId}`;\n            const response = await fetch(url, {\n                method: 'PUT',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}`);\n            }\n\n            (w as any).ALERTS?.ok('Ciclo actualizado exitosamente', '√âxito');\n            await loadPayCycles();\n            ($ as any)('#modal-paycycle').modal('hide');\n        } catch (error) {\n            console.error('Error al actualizar ciclo:', error);\n            (w as any).ALERTS?.error('Error al actualizar el ciclo de pago', 'Error');\n        }\n    };\n\n    const deleteCycle = async (recId: number, status: number): Promise<void> => {\n        // Validar que solo se puedan eliminar ciclos Open\n        if (status === 2 || status === 3) {\n            (w as any).ALERTS?.error(\n                'No se pueden eliminar ciclos Pagados o Registrados',\n                'Validaci√≥n'\n            );\n            return;\n        }\n\n        (w as any).ALERTS?.confirm(\n            '¬øEst√° seguro de eliminar este ciclo de pago?',\n            'Confirmar Eliminaci√≥n',\n            async (confirmed: boolean) => {\n                if (!confirmed) return;\n\n                try {\n                    const url = `${apiBase}/PayCycles/${recId}`;\n                    const response = await fetch(url, {\n                        method: 'DELETE',\n                        headers: {\n                            'Accept': 'application/json'\n                        }\n                    });\n\n                    if (!response.ok) {\n                        throw new Error(`HTTP ${response.status}`);\n                    }\n\n                    (w as any).ALERTS?.ok('Ciclo eliminado exitosamente', '√âxito');\n                    await loadPayCycles();\n                } catch (error) {\n                    console.error('Error al eliminar ciclo:', error);\n                    (w as any).ALERTS?.error('Error al eliminar el ciclo de pago', 'Error');\n                }\n            },\n            { type: 'danger' }\n        );\n    };\n\n    // ========================================================================\n    // ELIMINACI√ìN M√öLTIPLE DE CICLOS SELECCIONADOS\n    // ========================================================================\n\n    const deleteSelectedCycles = async (): Promise<void> => {\n        console.log('üóëÔ∏è deleteSelectedCycles() llamado');\n\n        // Obtener todos los checkboxes marcados\n        const $checked = $('.cycle-check:checked');\n        const count = $checked.length;\n\n        if (count === 0) {\n            console.warn('‚ö†Ô∏è No hay ciclos seleccionados');\n            return;\n        }\n\n        console.log(`üìä Ciclos seleccionados: ${count}`);\n\n        // Validar que ninguno est√© Pagado o Registrado\n        let hasLockedCycles = false;\n        $checked.each(function () {\n            const status = parseInt($(this).data('status'), 10);\n            if (status === 2 || status === 3) {\n                hasLockedCycles = true;\n                return false; // break\n            }\n        });\n\n        if (hasLockedCycles) {\n            (w as any).ALERTS?.error(\n                'No se pueden eliminar ciclos Pagados o Registrados. Deseleccione esos ciclos e intente nuevamente.',\n                'Validaci√≥n'\n            );\n            return;\n        }\n\n        // Confirmar eliminaci√≥n\n        const message = count === 1\n            ? '¬øEst√° seguro de eliminar este ciclo?'\n            : `¬øEst√° seguro de eliminar ${count} ciclos?`;\n\n        (w as any).ALERTS?.confirm(\n            message,\n            'Confirmar Eliminaci√≥n',\n            async (confirmed: boolean) => {\n                if (!confirmed) return;\n\n                try {\n                    console.log('üöÄ Eliminando ciclos...');\n\n                    // Eliminar cada ciclo\n                    const promises: Promise<void>[] = [];\n                    $checked.each(function () {\n                        const recId = $(this).data('recid');\n                        if (recId) {\n                            const url = `${apiBase}/PayCycles/${recId}`;\n                            const promise = fetch(url, {\n                                method: 'DELETE',\n                                headers: { 'Accept': 'application/json' }\n                            }).then(response => {\n                                if (!response.ok) {\n                                    throw new Error(`Error al eliminar ciclo ${recId}`);\n                                }\n                            });\n                            promises.push(promise);\n                        }\n                    });\n\n                    await Promise.all(promises);\n\n                    console.log('‚úÖ Todos los ciclos eliminados');\n                    (w as any).ALERTS?.ok(\n                        `Se eliminaron ${count} ciclo(s) exitosamente`,\n                        '√âxito'\n                    );\n\n                    // Recargar la tabla\n                    await loadPayCycles();\n\n                } catch (error) {\n                    console.error('‚ùå Error al eliminar ciclos:', error);\n                    (w as any).ALERTS?.error('Error al eliminar algunos ciclos', 'Error');\n                    await loadPayCycles(); // Recargar de todas formas\n                }\n            },\n            { type: 'danger' }\n        );\n    };\n\n    // ========================================================================\n    // UTILIDADES\n    // ========================================================================\n\n    const getStatusBadge = (status: number): string => {\n        const statusMap: any = {\n            0: '<span class=\"label label-info\">Abierto</span>',\n            1: '<span class=\"label label-warning\">Procesado</span>',\n            2: '<span class=\"label label-success\">Pagado</span>',\n            3: '<span class=\"label label-primary\">Registrado</span>'\n        };\n        return statusMap[status] || '<span class=\"label label-default\">Desconocido</span>';\n    };\n\n    const formatDate = (dateStr: string): string => {\n        if (!dateStr) return '-';\n        const date = new Date(dateStr);\n        return date.toLocaleDateString('es-DO', {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit'\n        });\n    };\n\n    const formatCurrency = (amount: number): string => {\n        return new Intl.NumberFormat('es-DO', {\n            style: 'currency',\n            currency: 'DOP'\n        }).format(amount || 0);\n    };\n\n    const updateButtonStates = (): void => {\n        const checkedCount = $('.cycle-check:checked').length;\n        $('#btn-delete-cycles').prop('disabled', checkedCount === 0);\n    };\n\n    // ========================================================================\n    // EVENT HANDLERS\n    // ========================================================================\n\n    const setupEventHandlers = (): void => {\n        console.log('üîß Configurando event handlers de PayCycles');\n\n        // ‚úÖ NUEVO: Click en encabezados para ordenar\n        $(document).off('click', '.sortable-header').on('click', '.sortable-header', function () {\n            const field = $(this).data('field');\n            console.log('üîÑ Ordenando por:', field);\n            \n            // Si es el mismo campo, invertir orden\n            if (sortField === field) {\n                sortOrder = sortOrder === 'asc' ? 'desc' : 'asc';\n            } else {\n                // Nuevo campo, ordenar ascendente\n                sortField = field;\n                sortOrder = 'asc';\n            }\n            \n            // Ordenar y renderizar\n            sortPayCycles();\n            renderPayCyclesTable();\n        });\n\n        // Bot√≥n: Generar Ciclos\n        $(document).off('click', '#btn-generate-cycles').on('click', '#btn-generate-cycles', async function () {\n            console.log('üöÄ Click en btn-generate-cycles');\n            await generatePayCycles();\n        });\n\n        // Bot√≥n: Nuevo Ciclo (manual)\n        $(document).off('click', '#btn-new-cycle').on('click', '#btn-new-cycle', function () {\n            console.log('‚ûï Click en btn-new-cycle');\n\n            if (!currentPayrollId || currentPayrollId === 0) {\n                (w as any).ALERTS?.error('Debe guardar la n√≥mina antes de crear ciclos', 'Error');\n                return;\n            }\n\n            // Limpiar formulario y abrir modal\n            const form = $('#paycycle-form')[0] as HTMLFormElement;\n            if (form) form.reset();\n            $('#paycycle-recid').val('0');\n            \n            // Inicializar checkboxes ISR y TSS como desmarcados\n            $('#paycycle-is-for-tax').iCheck('uncheck');\n            $('#paycycle-is-for-tss').iCheck('uncheck');\n            \n            $('#modal-paycycle-title').text('Nuevo Ciclo de Pago');\n            ($ as any)('#modal-paycycle').modal('show');\n        });\n\n        // Bot√≥n: Editar Ciclo\n        $(document).off('click', '.btn-edit-cycle').on('click', '.btn-edit-cycle', async function () {\n            if ($(this).prop('disabled')) {\n                console.warn('‚ö†Ô∏è Bot√≥n editar deshabilitado');\n                return;\n            }\n\n            const recId = $(this).data('recid');\n            const cycleStatus = $(this).data('status');\n            console.log('‚úèÔ∏è Click en btn-edit-cycle:', { recId, cycleStatus });\n\n            // Validar que solo se puedan editar ciclos Open\n            if (cycleStatus === 2 || cycleStatus === 3) {\n                (w as any).ALERTS?.warning(\n                    'No se pueden editar ciclos Pagados o Registrados',\n                    'Validaci√≥n'\n                );\n                return;\n            }\n\n            // Buscar el ciclo (PascalCase)\n            const cycle = payCycles.find(c => c.RecID === recId);\n            if (!cycle) {\n                (w as any).ALERTS?.error('Ciclo no encontrado', 'Error');\n                return;\n            }\n\n            // Llenar formulario (PascalCase)\n            $('#paycycle-recid').val(cycle.RecID);\n            $('#paycycle-start-date').val(cycle.PeriodStartDate.split('T')[0]);\n            $('#paycycle-end-date').val(cycle.PeriodEndDate.split('T')[0]);\n            $('#paycycle-pay-date').val(cycle.PayDate.split('T')[0]);\n            $('#paycycle-amount').val(cycle.AmountPaidPerPeriod);\n            $('#paycycle-observations').val(cycle.Observations || '');\n            \n            // Llenar checkboxes ISR y TSS\n            if (cycle.IsForTax) {\n                $('#paycycle-is-for-tax').iCheck('check');\n            } else {\n                $('#paycycle-is-for-tax').iCheck('uncheck');\n            }\n            \n            if (cycle.IsForTss) {\n                $('#paycycle-is-for-tss').iCheck('check');\n            } else {\n                $('#paycycle-is-for-tss').iCheck('uncheck');\n            }\n\n            $('#modal-paycycle-title').text('Editar Ciclo de Pago');\n            ($ as any)('#modal-paycycle').modal('show');\n        });\n\n        // Bot√≥n: Eliminar Ciclo Individual\n        $(document).off('click', '.btn-delete-cycle').on('click', '.btn-delete-cycle', function () {\n            if ($(this).prop('disabled')) {\n                console.warn('‚ö†Ô∏è Bot√≥n eliminar deshabilitado');\n                return;\n            }\n            const cycleId = $(this).data('recid');\n            const cycleStatus = $(this).data('status');\n            console.log('üóëÔ∏è Click en btn-delete-cycle:', { cycleId, cycleStatus });\n            deleteCycle(cycleId, cycleStatus);\n        });\n\n        // Bot√≥n Eliminar Seleccionados\n        $(document).off('click', '#btn-delete-cycles').on('click', '#btn-delete-cycles', async function () {\n            console.log('üóëÔ∏è Click en btn-delete-cycles');\n            await deleteSelectedCycles();\n        });\n\n        // Check all cycles\n        $(document).off('ifChanged', '#check-all-cycles').on('ifChanged', '#check-all-cycles', function (this: HTMLInputElement) {\n            const isChecked = $(this).is(':checked');\n            console.log('‚òëÔ∏è Check all cycles:', isChecked);\n            $('.cycle-check').iCheck(isChecked ? 'check' : 'uncheck');\n        });\n\n        // Individual cycle check\n        $(document).off('ifChanged', '.cycle-check').on('ifChanged', '.cycle-check', function () {\n            const total = $('.cycle-check').length;\n            const checked = $('.cycle-check:checked').length;\n\n            if (checked === total && total > 0) {\n                $('#check-all-cycles').iCheck('check');\n            } else {\n                $('#check-all-cycles').iCheck('uncheck');\n            }\n\n            updateButtonStates();\n        });\n\n        // Guardar ciclo (desde modal) - Con ISR y TSS\n        $(document).off('click', '#btn-save-paycycle').on('click', '#btn-save-paycycle', async function () {\n            const recId = parseInt($('#paycycle-recid').val() as string, 10);\n            const isNew = !recId || recId === 0;\n\n            // Capturar valores de ISR y TSS\n            const data = {\n                PeriodStartDate: $('#paycycle-start-date').val(),\n                PeriodEndDate: $('#paycycle-end-date').val(),\n                PayDate: $('#paycycle-pay-date').val(),\n                DefaultPayDate: $('#paycycle-pay-date').val(),\n                AmountPaidPerPeriod: parseFloat($('#paycycle-amount').val() as string) || 0,\n                StatusPeriod: 0, // Open\n                IsForTax: $('#paycycle-is-for-tax').is(':checked'),\n                IsForTss: $('#paycycle-is-for-tss').is(':checked'),\n                Observations: $('#paycycle-observations').val()\n            };\n\n            console.log('üíæ Guardando ciclo:', data);\n\n            if (isNew) {\n                await createPayCycle(data);\n            } else {\n                await updatePayCycle(recId, data);\n            }\n        });\n\n        // Al cambiar de tab a \"Ciclos de Pago\", recargar si es necesario\n        $('a[href=\"#tab_content2\"]').on('shown.bs.tab', function () {\n            console.log('üìë Tab Ciclos de Pago activado');\n            const payrollIdFromDOM = getPayrollIdFromDOM();\n            if (payrollIdFromDOM !== currentPayrollId) {\n                console.log('üîÑ PayrollId cambi√≥, recargando...');\n                currentPayrollId = payrollIdFromDOM;\n                loadPayCycles();\n            }\n        });\n\n        console.log('‚úÖ Event handlers configurados');\n    };\n\n    // ========================================================================\n    // INICIALIZACI√ìN P√öBLICA\n    // ========================================================================\n\n    /**\n     * Inicializa el m√≥dulo de ciclos de pago.\n     * Debe ser llamado desde payroll-form.ts despu√©s de guardar el Payroll.\n     */\n    (w as any).PayCyclesTab = {\n        init: async function (payrollId: number) {\n            console.log('üöÄ PayCyclesTab.init() - Payroll ID:', payrollId);\n            currentPayrollId = payrollId;\n            setupEventHandlers();\n            await loadPayCycles();\n        },\n        refresh: async function () {\n            console.log('üîÑ PayCyclesTab.refresh()');\n            await loadPayCycles();\n        },\n        setPayrollId: function (payrollId: number) {\n            console.log('üìù PayCyclesTab.setPayrollId():', payrollId);\n            currentPayrollId = payrollId;\n        }\n    };\n\n    // ========================================================================\n    // AUTO-INICIALIZACI√ìN\n    // ========================================================================\n\n    /**\n     * Se ejecuta autom√°ticamente al cargar el DOM.\n     */\n    $(async function () {\n        console.log('üìÑ DOM ready - paycycles-tab.ts');\n        \n        // Obtener PayrollId desde el DOM\n        currentPayrollId = getPayrollIdFromDOM();\n        console.log('üìä PayrollId inicial:', currentPayrollId);\n\n        // Configurar event handlers\n        setupEventHandlers();\n\n        // Cargar ciclos si estamos en modo edici√≥n\n        if (currentPayrollId > 0) {\n            console.log('‚úÖ Modo edici√≥n detectado, cargando ciclos...');\n            await loadPayCycles();\n        } else {\n            console.log('‚ÑπÔ∏è Modo creaci√≥n detectado, mostrando mensaje');\n            showNewPayrollState();\n        }\n    });\n\n    console.log('‚úÖ paycycles-tab.ts cargado y listo');\n})();\n"]}