{"version":3,"file":"deduction-codes-dt.js","sourceRoot":"","sources":["../../../TS/DeductionCodes/deduction-codes-dt.ts"],"names":[],"mappings":"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","sourcesContent":["// ============================================================================\n// Archivo: deduction-codes-dt.ts (VERSIÓN CORREGIDA PARA API REAL)\n// Proyecto: RH365.WebMVC\n// Ruta: TS/DeductionCodes/deduction-codes-dt.ts\n// Descripción:\n//   - Lista de Códigos de Deducción con DataTables\n//   - Adaptado para API que devuelve array directo (no wrapper)\n//   - Usa parámetros skip/take en lugar de pageNumber/pageSize\n// ============================================================================\n\ntype DeductionCodeRow = Record<string, unknown>;\n\ninterface ColumnConfig {\n    field: string;\n    visible: boolean;\n    order: number;\n    width?: number;\n}\n\n(function () {\n    const w: any = window;\n    const d: Document = document;\n    const $: any = w.jQuery || w.$;\n\n    const apiBase: string = w.RH365.urls.apiBase;\n    const pageContainer = d.querySelector(\"#deduction-codes-page\");\n\n    if (!pageContainer) return;\n\n    const token: string = pageContainer.getAttribute(\"data-token\") || \"\";\n    const dataareaId: string = pageContainer.getAttribute(\"data-dataarea\") || \"DAT\";\n    const userRefRecID: number = parseInt(pageContainer.getAttribute(\"data-user\") || \"0\", 10);\n\n    const $table: any = $(\"#deduction-codes-table\");\n    if (!$table.length) return;\n\n    let deductionCodesData: DeductionCodeRow[] = [];\n    let allColumns: string[] = [];\n    let visibleColumns: string[] = [];\n    const defaultColumns: string[] = ['ID', 'Name', 'ValidFrom', 'ValidTo', 'PayrollAction', 'DeductionStatus', 'CreatedOn'];\n\n    let gridViewsManager: any;\n    let gridColumnsManager: any;\n\n    // ========================================================================\n    // UTILIDADES - FORMATO Y TRADUCCIÓN\n    // ========================================================================\n\n    const titleize = (field: string): string => {\n        const translations: Record<string, string> = {\n            'RecID': 'ID Registro',\n            'ID': 'ID',\n            'Name': 'Nombre',\n            'ProjectRefRecID': 'ID Proyecto',\n            'ProjCategoryRefRecID': 'ID Categoría',\n            'ValidFrom': 'Válido Desde',\n            'ValidTo': 'Válido Hasta',\n            'Description': 'Descripción',\n            'LedgerAccount': 'Cuenta Contable',\n            'DepartmentRefRecID': 'ID Departamento',\n            'PayrollAction': 'Acción Nómina',\n            'CtbutionIndexBase': 'Base Contribución',\n            'CtbutionMultiplyAmount': 'Monto Contribución',\n            'CtbutionPayFrecuency': 'Frecuencia Pago Contrib.',\n            'CtbutionLimitPeriod': 'Periodo Límite Contrib.',\n            'CtbutionLimitAmount': 'Límite Contrib.',\n            'CtbutionLimitAmountToApply': 'Límite a Aplicar Contrib.',\n            'DductionIndexBase': 'Base Deducción',\n            'DductionMultiplyAmount': 'Monto Deducción',\n            'DductionPayFrecuency': 'Frecuencia Pago Deduc.',\n            'DductionLimitPeriod': 'Periodo Límite Deduc.',\n            'DductionLimitAmount': 'Límite Deduc.',\n            'DductionLimitAmountToApply': 'Límite a Aplicar Deduc.',\n            'IsForTaxCalc': 'Para ISR',\n            'IsForTssCalc': 'Para TSS',\n            'DeductionStatus': 'Estado',\n            'Observations': 'Observaciones',\n            'CreatedOn': 'Fecha Creación',\n            'CreatedBy': 'Creado Por',\n            'ModifiedOn': 'Modificado',\n            'ModifiedBy': 'Modificado Por'\n        };\n        return translations[field] || field.replace(/([a-z])([A-Z])/g, \"$1 $2\").replace(/_/g, \" \").replace(/^./, (c) => c.toUpperCase());\n    };\n\n    const formatCell = (value: unknown, field: string): string => {\n        if (value == null) return \"\";\n\n        if (typeof value === \"boolean\") {\n            if (field === \"DeductionStatus\") {\n                return value ? '<span class=\"label label-success\">Activo</span>' : '<span class=\"label label-danger\">Inactivo</span>';\n            }\n            if (field === \"IsForTaxCalc\" || field === \"IsForTssCalc\") {\n                return value ? '<span class=\"label label-info\">Sí</span>' : '<span class=\"label label-default\">No</span>';\n            }\n            return value ? \"Sí\" : \"No\";\n        }\n\n        if (field === \"PayrollAction\" && typeof value === \"number\") {\n            const actions: Record<number, string> = {\n                0: '<span class=\"label label-default\">Ninguna</span>',\n                1: '<span class=\"label label-primary\">Contribución</span>',\n                2: '<span class=\"label label-warning\">Deducción</span>',\n                3: '<span class=\"label label-info\">Ambas</span>'\n            };\n            return actions[value] || String(value);\n        }\n\n        if ((field === \"CtbutionIndexBase\" || field === \"DductionIndexBase\") && typeof value === \"number\") {\n            const indexBase: Record<number, string> = {\n                0: 'Ninguno',\n                1: 'Salario Base',\n                2: 'Salario Bruto'\n            };\n            return indexBase[value] || String(value);\n        }\n\n        if ((field === \"CtbutionPayFrecuency\" || field === \"DductionPayFrecuency\") && typeof value === \"number\") {\n            const frequency: Record<number, string> = {\n                0: 'No aplica',\n                1: 'Semanal',\n                2: 'Quincenal',\n                3: 'Mensual'\n            };\n            return frequency[value] || String(value);\n        }\n\n        if (typeof value === \"string\" && /^\\d{4}-\\d{2}-\\d{2}T/.test(value)) {\n            const dt = new Date(value);\n            if (!isNaN(dt.getTime())) {\n                return dt.toLocaleDateString('es-DO', { day: '2-digit', month: '2-digit', year: 'numeric' });\n            }\n        }\n\n        if ((field.includes(\"Amount\") || field.includes(\"Multiply\")) && typeof value === \"number\") {\n            return value.toLocaleString('es-DO', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\n        }\n\n        return String(value);\n    };\n\n    // ========================================================================\n    // COMUNICACIÓN CON API\n    // ========================================================================\n\n    const fetchJson = async (url: string): Promise<any> => {\n        const headers: Record<string, string> = {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        };\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n        const response = await fetch(url, { headers });\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status} @ ${url}`);\n        }\n        return response.json();\n    };\n\n    const getColumnsFromData = (sample: DeductionCodeRow): string[] => {\n        if (!sample || typeof sample !== 'object') {\n            return [...defaultColumns];\n        }\n        const excluded = new Set(['RecID', 'RowVersion', 'DataareaID']);\n        return Object.keys(sample).filter(col => !excluded.has(col));\n    };\n\n    // ========================================================================\n    // DATATABLE - INICIALIZACIÓN\n    // ========================================================================\n\n    const initializeDataTable = (columns: string[]): void => {\n        if ($.fn.DataTable.isDataTable($table)) {\n            $table.DataTable().destroy();\n        }\n\n        const theadHtml = `\n            <tr>\n                <th style=\"width:40px;\"><input type=\"checkbox\" id=\"check-all\" class=\"flat\"/></th>\n                ${columns.map(col => `<th data-field=\"${col}\">${titleize(col)}</th>`).join('')}\n            </tr>\n        `;\n        $table.find('thead').html(theadHtml);\n\n        if ($.fn.iCheck) {\n            $('.flat').iCheck({ checkboxClass: 'icheckbox_flat-green' });\n        }\n\n        const dtConfig: any = {\n            processing: true,\n            serverSide: false,\n            responsive: true,\n            autoWidth: false,\n            order: [[1, 'asc']],\n            pageLength: 25,\n            lengthMenu: [[10, 25, 50, 100], [10, 25, 50, 100]],\n            language: {\n                lengthMenu: 'Mostrar _MENU_ registros',\n                zeroRecords: 'No se encontraron resultados',\n                info: 'Mostrando _START_ a _END_ de _TOTAL_ registros',\n                infoEmpty: 'No hay registros',\n                infoFiltered: '(filtrado de _MAX_ registros)',\n                search: 'Buscar:',\n                paginate: { first: 'Primera', last: 'Última', next: 'Siguiente', previous: 'Anterior' },\n                processing: 'Procesando...'\n            },\n            columns: [\n                {\n                    data: null,\n                    orderable: false,\n                    searchable: false,\n                    className: 'text-center',\n                    render: (_data: any, _type: string, row: DeductionCodeRow) => {\n                        return `<input type=\"checkbox\" class=\"flat row-check\" data-recid=\"${row.RecID || ''}\"/>`;\n                    }\n                },\n                ...columns.map(col => ({ data: col, name: col, render: (data: unknown) => formatCell(data, col) }))\n            ],\n            ajax: (_data: any, callback: (result: { data: DeductionCodeRow[] }) => void) => {\n                loadDeductionCodes().then(items => {\n                    deductionCodesData = items;\n                    callback({ data: items });\n                    updateSummary(items.length);\n                }).catch(err => {\n                    console.error('Error cargando códigos de deducción:', err);\n                    showError(err.message);\n                    callback({ data: [] });\n                });\n            },\n            drawCallback: function () {\n                if ($.fn.iCheck) {\n                    $table.find('.flat').iCheck({ checkboxClass: 'icheckbox_flat-green' });\n                }\n            }\n        };\n\n        $table.DataTable(dtConfig);\n    };\n\n    /**\n     * Carga códigos de deducción desde API\n     * NOTA: El API devuelve un array directo, no un objeto con wrapper\n     */\n    const loadDeductionCodes = async (): Promise<DeductionCodeRow[]> => {\n        // Usar skip/take en lugar de pageNumber/pageSize\n        const url = `${apiBase}/DeductionCodes?skip=0&take=100`;\n        const response: any = await fetchJson(url);\n        \n        // El API devuelve array directo\n        if (Array.isArray(response)) {\n            return response;\n        }\n        \n        // Si por alguna razón viene con wrapper, manejarlo también\n        if (response && response.Data && Array.isArray(response.Data)) {\n            return response.Data;\n        }\n        \n        throw new Error('Respuesta del API inválida');\n    };\n\n    const updateSummary = (count: number): void => {\n        const summary = d.getElementById('deduction-codes-summary');\n        if (summary) {\n            summary.textContent = `${count} código${count !== 1 ? 's' : ''} de deducción`;\n        }\n    };\n\n    const showError = (message: string): void => {\n        const errorHtml = `\n            <tr>\n                <td colspan=\"10\" class=\"text-center text-danger\">\n                    <i class=\"fa fa-exclamation-triangle\"></i> ${message}\n                </td>\n            </tr>\n        `;\n        $table.find('tbody').html(errorHtml);\n    };\n\n    // ========================================================================\n    // OPERACIONES CRUD\n    // ========================================================================\n\n    const updateButtonStates = (): void => {\n        const checkedCount = $table.find('tbody input.row-check:checked').length;\n        $('#btn-edit').prop('disabled', checkedCount !== 1);\n        $('#btn-delete').prop('disabled', checkedCount === 0);\n    };\n\n    const exportToCSV = (): void => {\n        if (!deductionCodesData.length) {\n            (w as any).ALERTS.warn('No hay datos para exportar', 'Advertencia');\n            return;\n        }\n\n        const dt: any = $table.DataTable();\n        const rows: DeductionCodeRow[] = dt.rows({ search: 'applied' }).data().toArray();\n\n        if (!rows.length) {\n            (w as any).ALERTS.warn('No hay datos visibles para exportar', 'Advertencia');\n            return;\n        }\n\n        const columns = visibleColumns;\n        const csvLines: string[] = [columns.map(col => titleize(col)).join(',')];\n\n        rows.forEach(row => {\n            const line = columns.map(col => {\n                const value = (row as any)[col];\n                const str = value == null ? '' : String(value).replace(/\"/g, '\"\"');\n                return /[\",\\n]/.test(str) ? `\"${str}\"` : str;\n            }).join(',');\n            csvLines.push(line);\n        });\n\n        const blob = new Blob([csvLines.join('\\n')], { type: 'text/csv;charset=utf-8;' });\n        const url = URL.createObjectURL(blob);\n        const link = d.createElement('a');\n        const fileName = `CodigosDeduccion_${new Date().toISOString().slice(0, 10)}.csv`;\n        link.href = url;\n        link.download = fileName;\n        link.style.visibility = 'hidden';\n        d.body.appendChild(link);\n        link.click();\n        d.body.removeChild(link);\n        URL.revokeObjectURL(url);\n    };\n\n    const deleteDeductionCode = async (recId: string): Promise<void> => {\n        const url = `${apiBase}/DeductionCodes/${recId}`;\n        const headers: Record<string, string> = { 'Authorization': `Bearer ${token}` };\n        const response = await fetch(url, { method: 'DELETE', headers });\n        if (!response.ok) {\n            throw new Error(`Error al eliminar código de deducción: ${response.status}`);\n        }\n    };\n\n    // ========================================================================\n    // GESTIÓN DE VISTAS\n    // ========================================================================\n\n    const applyColumnChanges = (newColumns: string[]): void => {\n        visibleColumns = newColumns;\n        initializeDataTable(newColumns);\n        if (gridViewsManager && gridViewsManager.hasCurrentView()) {\n            $('#btn-save-view-changes').show();\n        }\n    };\n\n    const updateViewsDropdown = (): void => {\n        const views = gridViewsManager.getAvailableViews();\n        const container = $('#saved-views-container');\n        container.empty();\n\n        if (views.length === 0) {\n            container.append('<li class=\"text-muted\" style=\"padding: 5px 20px;\">No hay vistas guardadas</li>');\n            return;\n        }\n\n        views.forEach((view: any) => {\n            const icon = view.IsDefault ? '<i class=\"fa fa-star text-warning\"></i>' : '<i class=\"fa fa-file-o\"></i>';\n            const item = $(`\n                <li style=\"position: relative;\">\n                    <a href=\"#\" data-view-id=\"${view.RecID}\" style=\"display: inline-block; width: 80%;\">\n                        ${icon} ${view.ViewName}\n                        ${view.IsPublic ? '<span class=\"label label-info label-sm\">Pública</span>' : ''}\n                    </a>\n                    ${!view.IsDefault ? `\n                        <a href=\"#\" class=\"btn-set-default\" data-view-id=\"${view.RecID}\" \n                           style=\"position: absolute; right: 10px; top: 5px; color: #999;\" \n                           title=\"Establecer como predeterminada\">\n                            <i class=\"fa fa-star-o\"></i>\n                        </a>\n                    ` : ''}\n                </li>\n            `);\n\n            item.find('a[data-view-id]').first().on('click', async function (e) {\n                e.preventDefault();\n                await loadViewById(view.RecID);\n            });\n\n            item.find('.btn-set-default').on('click', async function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                (w as any).ALERTS.confirm(\n                    `¿Establecer \"${view.ViewName}\" como vista predeterminada?`,\n                    'Confirmar',\n                    async (confirmed: boolean) => {\n                        if (confirmed) {\n                            const success = await gridViewsManager.setDefaultView(view.RecID);\n                            if (success) {\n                                updateViewsDropdown();\n                            }\n                        }\n                    }\n                );\n            });\n\n            container.append(item);\n        });\n    };\n\n    const loadViewById = async (viewId: number): Promise<void> => {\n        try {\n            const columnConfigs: ColumnConfig[] = await gridViewsManager.loadView(viewId);\n            if (columnConfigs.length > 0) {\n                gridColumnsManager.applyColumnConfig(columnConfigs);\n                const newColumns = columnConfigs.filter(c => c.visible).sort((a, b) => a.order - b.order).map(c => c.field);\n                applyColumnChanges(newColumns);\n                const viewName = gridViewsManager.getCurrentViewName();\n                $('#current-view-name').text(viewName);\n                $('#btn-save-view-changes').hide();\n            }\n        } catch (error) {\n            console.error('Error cargando vista:', error);\n        }\n    };\n\n    // ========================================================================\n    // EVENT HANDLERS\n    // ========================================================================\n\n    $(document).on('ifChanged', '#check-all', function (this: HTMLInputElement) {\n        const isChecked = $(this).is(':checked');\n        $table.find('tbody input.row-check').iCheck(isChecked ? 'check' : 'uncheck');\n    });\n\n    $(document).on('ifChanged', '.row-check', function () {\n        const total = $table.find('tbody input.row-check').length;\n        const checked = $table.find('tbody input.row-check:checked').length;\n        if (checked === total && total > 0) {\n            $('#check-all').iCheck('check');\n        } else {\n            $('#check-all').iCheck('uncheck');\n        }\n        updateButtonStates();\n    });\n\n    $('#btn-new').on('click', () => { window.location.href = '/DeductionCode/NewEdit'; });\n\n    $('#btn-edit').on('click', () => {\n        const $checked = $table.find('tbody input.row-check:checked').first();\n        if ($checked.length) {\n            const recId = $checked.data('recid');\n            window.location.href = `/DeductionCode/NewEdit?recId=${recId}`;\n        }\n    });\n\n    $('#btn-delete').on('click', async () => {\n        const $checked = $table.find('tbody input.row-check:checked');\n        const count = $checked.length;\n        if (count === 0) return;\n\n        const message = count === 1\n            ? '¿Está seguro de eliminar este código de deducción?'\n            : `¿Está seguro de eliminar ${count} códigos de deducción?`;\n\n        (w as any).ALERTS.confirm(\n            message,\n            'Confirmar Eliminación',\n            async (confirmed: boolean) => {\n                if (!confirmed) return;\n\n                try {\n                    const promises: Promise<void>[] = [];\n                    $checked.each(function () {\n                        const recId = $(this).data('recid');\n                        if (recId) {\n                            promises.push(deleteDeductionCode(recId));\n                        }\n                    });\n                    await Promise.all(promises);\n                    (w as any).ALERTS.ok('Código(s) de deducción eliminado(s) correctamente', 'Éxito');\n                    $table.DataTable().ajax.reload();\n                } catch (error) {\n                    console.error('Error al eliminar:', error);\n                    (w as any).ALERTS.error('Error al eliminar código(s) de deducción', 'Error');\n                }\n            },\n            { type: 'danger' }\n        );\n    });\n\n    $('#btn-export').on('click', exportToCSV);\n\n    $('#btn-import').on('click', () => {\n        (w as any).ALERTS.info('Funcionalidad de importación próximamente', 'Información');\n    });\n\n    $table.on('click', 'tbody tr', function (e: any) {\n        if ($(e.target).is('input.row-check') || $(e.target).closest('.icheckbox_flat-green').length) {\n            return;\n        }\n        const $row = $(this);\n        const $checkbox = $row.find('input.row-check');\n        if ($checkbox.length) {\n            const isChecked = $checkbox.is(':checked');\n            $checkbox.iCheck(isChecked ? 'uncheck' : 'check');\n        }\n    });\n\n    $table.on('dblclick', 'tbody tr', function () {\n        const $row = $(this);\n        const $checkbox = $row.find('input.row-check');\n        const recId = $checkbox.data('recid');\n        if (recId) {\n            window.location.href = `/DeductionCode/NewEdit?recId=${recId}`;\n        }\n    });\n\n    $('#btn-manage-columns').on('click', () => { gridColumnsManager.showColumnsModal(); });\n\n    $('#btn-apply-columns').on('click', () => {\n        const columnConfigs = gridColumnsManager.applyColumns();\n        const newColumns = columnConfigs.filter(c => c.visible).sort((a, b) => a.order - b.order).map(c => c.field);\n        applyColumnChanges(newColumns);\n        ($ as any)('#modal-manage-columns').modal('hide');\n    });\n\n    $('#btn-new-view').on('click', (e) => {\n        e.preventDefault();\n        $('#view-name').val('');\n        $('#view-is-default').prop('checked', false);\n        $('#view-is-public').prop('checked', false);\n        ($ as any)('#modal-save-view').modal('show');\n    });\n\n    $('#btn-confirm-save-view').on('click', async () => {\n        const viewName = ($('#view-name').val() as string).trim();\n        const isDefault = $('#view-is-default').is(':checked');\n        const isPublic = $('#view-is-public').is(':checked');\n\n        if (!viewName) {\n            (w as any).ALERTS.warn('Por favor ingrese un nombre para la vista', 'Advertencia');\n            return;\n        }\n\n        const columnConfigs = gridColumnsManager.getCurrentColumnConfig();\n        const success = await gridViewsManager.saveView(viewName, columnConfigs, isDefault, isPublic);\n\n        if (success) {\n            ($ as any)('#modal-save-view').modal('hide');\n            $('#current-view-name').text(viewName);\n            $('#btn-save-view-changes').hide();\n            updateViewsDropdown();\n        }\n    });\n\n    $('#btn-save-as-view').on('click', () => {\n        $('#view-name-saveas').val('');\n        $('#view-is-default-saveas').prop('checked', false);\n        $('#view-is-public-saveas').prop('checked', false);\n        ($ as any)('#modal-save-as-view').modal('show');\n    });\n\n    $('#btn-confirm-save-as').on('click', async () => {\n        const viewName = ($('#view-name-saveas').val() as string).trim();\n        const isDefault = $('#view-is-default-saveas').is(':checked');\n        const isPublic = $('#view-is-public-saveas').is(':checked');\n\n        if (!viewName) {\n            (w as any).ALERTS.warn('Por favor ingrese un nombre para la vista', 'Advertencia');\n            return;\n        }\n\n        const columnConfigs = gridColumnsManager.getCurrentColumnConfig();\n        const success = await gridViewsManager.saveView(viewName, columnConfigs, isDefault, isPublic);\n\n        if (success) {\n            ($ as any)('#modal-save-as-view').modal('hide');\n            $('#current-view-name').text(viewName);\n            $('#btn-save-view-changes').hide();\n            updateViewsDropdown();\n        }\n    });\n\n    $('#btn-save-view-changes').on('click', async () => {\n        if (!gridViewsManager.hasCurrentView()) {\n            (w as any).ALERTS.warn('No hay vista activa para actualizar', 'Advertencia');\n            return;\n        }\n\n        const columnConfigs = gridColumnsManager.getCurrentColumnConfig();\n        const success = await gridViewsManager.updateView(columnConfigs);\n\n        if (success) {\n            $('#btn-save-view-changes').hide();\n        }\n    });\n\n    $('#btn-reset-view').on('click', () => {\n        (w as any).ALERTS.confirm(\n            '¿Desea restablecer a la vista por defecto?',\n            'Confirmar',\n            (confirmed: boolean) => {\n                if (confirmed) {\n                    gridColumnsManager.resetToDefault(defaultColumns);\n                    applyColumnChanges(defaultColumns);\n                    $('#current-view-name').text('Vista por defecto');\n                    $('#btn-save-view-changes').hide();\n                }\n            }\n        );\n    });\n\n    $(document).on('click', '[data-view=\"default\"]', (e) => {\n        e.preventDefault();\n        gridColumnsManager.resetToDefault(defaultColumns);\n        applyColumnChanges(defaultColumns);\n        $('#current-view-name').text('Vista por defecto');\n        $('#btn-save-view-changes').hide();\n    });\n\n    // ========================================================================\n    // INICIALIZACIÓN\n    // ========================================================================\n\n    $(async function () {\n        try {\n            // Usar skip/take en lugar de pageNumber/pageSize\n            const probeUrl = `${apiBase}/DeductionCodes?skip=0&take=1`;\n            const probe: any = await fetchJson(probeUrl);\n\n            // El API devuelve array directo\n            if (Array.isArray(probe) && probe.length > 0) {\n                allColumns = getColumnsFromData(probe[0]);\n            } else {\n                allColumns = [...defaultColumns];\n            }\n\n            const GridViewsManagerClass = (w as any).GridViewsManager;\n            const GridColumnsManagerClass = (w as any).GridColumnsManager;\n\n            if (!GridViewsManagerClass || !GridColumnsManagerClass) {\n                console.error('GridViewsManager o GridColumnsManager no están disponibles');\n                visibleColumns = [...defaultColumns];\n                initializeDataTable(visibleColumns);\n                return;\n            }\n\n            gridViewsManager = new GridViewsManagerClass(apiBase, token, \"DeductionCodes\", userRefRecID, dataareaId);\n            const savedColumns: ColumnConfig[] = await gridViewsManager.initialize();\n\n            if (savedColumns.length > 0) {\n                visibleColumns = savedColumns.filter(c => c.visible).sort((a, b) => a.order - b.order).map(c => c.field);\n                const viewName = gridViewsManager.getCurrentViewName();\n                $('#current-view-name').text(viewName);\n            } else {\n                visibleColumns = [...defaultColumns];\n            }\n\n            gridColumnsManager = new GridColumnsManagerClass(allColumns, visibleColumns, (newColumns: string[]) => {\n                applyColumnChanges(newColumns);\n            });\n\n            updateViewsDropdown();\n            initializeDataTable(visibleColumns);\n        } catch (error) {\n            console.error('Error en inicialización:', error);\n            visibleColumns = [...defaultColumns];\n            initializeDataTable(visibleColumns);\n            showError('Error al cargar la configuración');\n        }\n    });\n})();\n"]}