@* ============================================================================
   Archivo: _Alerts.cshtml
   Proyecto: RH365 (Front-End MVC .NET 8)
   Ruta: Views/Generic/_Alerts.cshtml
   Descripción: Sistema de notificaciones usando PNotify (Gentelella)
   ============================================================================ *@

<script>
    (function () {
        // Verificar que PNotify esté disponible
        if (typeof PNotify === 'undefined') {
            // Fallback a alert() nativo si PNotify no existe
            window.ALERTS = {
                toast: function(opts) { alert(opts.title + ': ' + opts.message); },
                ok: function(msg, title) { alert('✓ ' + (title || 'Éxito') + ': ' + msg); },
                info: function(msg, title) { alert('ℹ ' + (title || 'Info') + ': ' + msg); },
                warn: function(msg, title) { alert('⚠ ' + (title || 'Atención') + ': ' + msg); },
                error: function(msg, title) { alert('✖ ' + (title || 'Error') + ': ' + msg); },
                alert: function(opts) { alert(opts.title + ': ' + opts.message); }
            };
            return;
        }

        // Limpiar notificaciones de demo que PNotify pueda mostrar
        if (PNotify.removeAll) {
            PNotify.removeAll();
        }

        // API pública usando PNotify
        window.ALERTS = {
            // Mostrar toast personalizado
            toast: function(opts) {
                const o = Object.assign({
                    title: '',
                    message: '',
                    type: 'info',
                    timeout: 3500
                }, opts || {});

                new PNotify({
                    title: o.title,
                    text: o.message,
                    type: o.type === 'danger' ? 'error' : o.type,
                    delay: o.timeout,
                    styling: 'bootstrap3',
                    hide: o.timeout > 0,
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            },

            // Notificación de éxito
            ok: function(msg, title) {
                new PNotify({
                    title: title || 'Éxito',
                    text: msg,
                    type: 'success',
                    delay: 3500,
                    styling: 'bootstrap3',
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            },

            // Notificación informativa
            info: function(msg, title) {
                new PNotify({
                    title: title || 'Info',
                    text: msg,
                    type: 'info',
                    delay: 3500,
                    styling: 'bootstrap3',
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            },

            // Notificación de advertencia
            warn: function(msg, title) {
                new PNotify({
                    title: title || 'Atención',
                    text: msg,
                    type: 'notice',
                    delay: 3500,
                    styling: 'bootstrap3',
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            },

            // Notificación de error
            error: function(msg, title) {
                new PNotify({
                    title: title || 'Error',
                    text: msg,
                    type: 'error',
                    delay: 4000,
                    styling: 'bootstrap3',
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            },

            // Alias para toast
            alert: function(opts) {
                this.toast(opts);
            },

            // Notificación sticky (no se cierra automáticamente)
            sticky: function(msg, title, type) {
                new PNotify({
                    title: title || 'Notificación',
                    text: msg,
                    type: type || 'info',
                    hide: false,
                    styling: 'bootstrap3',
                    animate: {
                        animate: true,
                        in_class: 'fadeInDown',
                        out_class: 'fadeOutUp'
                    }
                });
            }
        };
    })();
</script>